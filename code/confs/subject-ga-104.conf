train{
    # folder structure: exps_folder/subject/methodname/train_split/train/[checkpoints, saved conf]
    #                                                             /eval/test_split/step/image_folders
    exps_folder = ../data/experiments/ # location of experiments folder, use ln -s to link to data disk
    methodname = pointavatar
    dataset_class = datasets.real_dataset.FaceDataset
    learning_rate = 1.0e-4
    learning_rate_cam = 5.0e-4
    num_pixels = 2048
    max_points_training = 819200 # max number of points calculated during training (num_batch * num_points), reduce this if memory is limited.
    max_batch = 8
    upsample_freq = 5 # upsample is performed every 5 epochs, if number of points won't exceed point_cloud.max_points
    plot_freq = 1
    sched_milestones = [40, 60] # decay learning rate in these epochs
    sched_factor = 0.5
    GT_lbs_milestones = [10, 20, 30, 40] # decay flame regularization in these epcohs
    GT_lbs_factor = 0.5
    optimize_expression=True # optimize flame expressions
    optimize_camera=True # optimize camera and flame poses, this is important for alignment and numerical results...
}
loss{
    mask_weight = 1.0
    lbs_weight = 10.0
    eikonal_weight = 0.1
    sdf_consistency_weight =1.0
    vgg_feature_weight = 0.1
}
subject_id = 104
dataset_train{
    data_root = /media/perukas/home/dev/datasets/gaussian-avatars-nersemble/104/cluster/ikarus/sqian/project/dynamic-head-avatars/code/multi-view-head-tracker/export/UNION10_104_EMO1234EXP234589_v16_DS2-0.5x_lmkSTAR_teethV3_SMOOTH_offsetS_whiteBg_maskBelowLine/
    transforms_filename = transforms_train.json
    prefetch = false,
    flip_yz = false
}
dataset_val{
    data_root = /media/perukas/home/dev/datasets/gaussian-avatars-nersemble/104/cluster/ikarus/sqian/project/dynamic-head-avatars/code/multi-view-head-tracker/export/UNION10_104_EMO1234EXP234589_v16_DS2-0.5x_lmkSTAR_teethV3_SMOOTH_offsetS_whiteBg_maskBelowLine/
    transforms_filename = transforms_val.json
    prefetch = false,
    flip_yz = false
}
dataset_test{
    data_root = /media/perukas/home/dev/datasets/gaussian-avatars-nersemble/104/cluster/ikarus/sqian/project/dynamic-head-avatars/code/multi-view-head-tracker/export/UNION10_104_EMO1234EXP234589_v16_DS2-0.5x_lmkSTAR_teethV3_SMOOTH_offsetS_whiteBg_maskBelowLine/
    transforms_filename = transforms_test.json
    prefetch = false,
    flip_yz = false
}
flame_kwargs{
    model_path = /media/perukas/home/dev/phd/3dmms/FLAME/FLAME2023/flame2023.pkl
    mesh_path = /media/perukas/home/dev/phd/prjs/splat-tex-avatars/assets/head_template_mesh.obj
    masks_path = /media/perukas/home/dev/phd/3dmms/FLAME/FLAME_masks/FLAME_masks.pkl
    lmk_embedding_with_eyes_path = /media/perukas/home/dev/phd/prjs/splat-tex-avatars/assets/landmark_embedding_with_eyes.npy
    nid_params = 300
    nex_params = 100
    add_teeth = true

}
model{
    prune_thresh=0.5
    geometry_network
    {
        d_in = 3
        d_out = 1
        feature_vector_size = 3
        dims = [256, 256, 256, 256, 256, 256, 256, 256, 256]
        geometric_init = True
        bias = 0.6
        skip_in = [4]
        weight_norm = True
        multires = 6
    }
    rendering_network
    {
        d_in = 3
        feature_vector_size = 0
        d_out = 3
        dims = [64, 64]
        weight_norm = True
        multires_view = 0
        multires_pnts = 0
    }
    deformer_network
    {
        d_in = 3
        dims = [128, 128, 128, 128]
        weight_norm = True
        multires = 0
	    num_exp = 100
	    ghostbone = False
	    deform_c = True
    }
    point_cloud
    {
        n_init_points=400
        max_points=409600 # max number of points for the canonical model, reduce this if memory is limited.
    }
}
